<UserControl x:Class="AcManager.Pages.Settings.SettingsOnline" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:networkInformation="clr-namespace:System.Net.NetworkInformation;assembly=System"
        xmlns:settings="clr-namespace:AcManager.Pages.Settings" xmlns:mui="http://firstfloorsoftware.com/ModernUI"
        xmlns:attached="clr-namespace:FirstFloor.ModernUI.Windows.Attached;assembly=FirstFloor.ModernUI" mc:Ignorable="d" d:DesignHeight="300"
        d:DesignWidth="300" FocusVisualStyle="{x:Null}" d:DataContext="{d:DesignInstance settings:SettingsOnline+SettingsOnlineViewModel}">
    <UserControl.Resources>
        <mui:SharedResourceDictionary Source="/AcManager.Controls;component/Assets/SettingsSpecific.xaml" />
    </UserControl.Resources>
    <ScrollViewer>
        <StackPanel Style="{StaticResource SettingsPanel}">
            <DockPanel>
                <Label>Online name:</Label>
                <CheckBox DockPanel.Dock="Left" IsChecked="{Binding Drive.DifferentPlayerNameOnline}" ToolTip="Use different name online"
                        VerticalAlignment="Center" />
                <TextBox Text="{Binding Drive.PlayerNameOnline}" attached:WatermarkService.Watermark="?" attached:FocusAdvancement.AdvancesByEnterKey="True"
                        IsEnabled="{Binding Drive.DifferentPlayerNameOnline}" />
            </DockPanel>

            <CheckBox IsChecked="{Binding Online.RememberPasswords}">
                <Label>Remember passwords</Label>
            </CheckBox>

            <CheckBox IsChecked="{Binding Online.CompactUi}">
                <Label>Compact UI</Label>
            </CheckBox>

            <!--connection-->
            <TextBlock Style="{StaticResource SettingsPanel.Heading2}">Connection:</TextBlock>
            
            <DockPanel>
                <Label>Server:</Label>
                <ComboBox ItemsSource="{Binding Online.OnlineServers}" SelectedItem="{Binding Online.OnlineServer}" DisplayMemberPath="DisplayName" />
            </DockPanel>

            <CheckBox IsChecked="{Binding Online.LoadServerInformationDirectly}">
                <CheckBox.ToolTip>Load server information directly instead of using AC servers; could be faster and more actual, but some information (such as active session) will be missing</CheckBox.ToolTip>
                <Label>Load server information directly</Label>
            </CheckBox>

            <!--pinging-->
            <TextBlock Style="{StaticResource SettingsPanel.Heading2}">Pinging:</TextBlock>

            <CheckBox IsChecked="{Binding Online.ThreadsPing}" ToolTip="The most correct pinging, but the slowest one">
                <Label>Use threads instead of asynchronous API</Label>
            </CheckBox>

            <DockPanel IsEnabled="{Binding Online.ThreadsPing, Converter={StaticResource InvertBooleanConverter}}">
                <DockPanel.ToolTip>Increase value to make pinging of the whole list go faster, but it’ll be less accurate</DockPanel.ToolTip>
                <mui:ValueLabel Value="{Binding Online.PingConcurrency}" Mode="Integer">Ping concurrency</mui:ValueLabel>
                <Slider Minimum="10" Maximum="300" Value="{Binding Online.PingConcurrency}" TickFrequency="29" TickPlacement="BottomRight" />
            </DockPanel>

            <DockPanel>
                <mui:ValueLabel Value="{Binding Online.PingTimeout}" Mode="Integer" Postfix=" ms">Ping timeout</mui:ValueLabel>
                <Slider Minimum="200" Maximum="5000" Value="{Binding Online.PingTimeout}" TickFrequency="480" TickPlacement="BottomRight" />
            </DockPanel>

            <!--<CheckBox IsChecked="{Binding Online.UseFastServer}" attached:LimitedService.Limited="True">
                <Label>Use Fast Caching Server (experimental)</Label>
            </CheckBox>-->

            <!--adding by ip-->
            <TextBlock Style="{StaticResource SettingsPanel.Heading2}">Adding by IP:</TextBlock>
            
            <DockPanel>
                <Label>Scan ports:</Label>
                <TextBox Text="{Binding Online.PortsEnumeration}" attached:WatermarkService.Watermark="?" attached:FocusAdvancement.AdvancesByEnterKey="True">
                    <TextBox.ToolTip>Some enumeration like “9000-10000”</TextBox.ToolTip>
                </TextBox>
            </DockPanel>

            <DockPanel>
                <mui:ValueLabel Value="{Binding Online.ScanPingTimeout}" Mode="Integer" Postfix=" ms">Scan timeout</mui:ValueLabel>
                <Slider Minimum="200" Maximum="5000" Value="{Binding Online.ScanPingTimeout}" TickFrequency="480" TickPlacement="BottomRight" />
            </DockPanel>

            <TextBlock Style="{StaticResource SettingsPanel.Heading2}">LAN:</TextBlock>

            <!--<CheckBox IsChecked="{Binding Holder.AlternativeScanningMethod}" Margin="0 0 0 8" IsEnabled="False">
                <Label>Alternative scanning method</Label>
            </CheckBox>-->

            <DockPanel>
                <Label>Scan ports:</Label>
                <TextBox Text="{Binding Online.LanPortsEnumeration}" attached:WatermarkService.Watermark="?" attached:FocusAdvancement.AdvancesByEnterKey="True">
                    <TextBox.ToolTip>Some enumeration like “9600,9602,9700-9750”</TextBox.ToolTip>
                </TextBox>
            </DockPanel>

            <DockPanel>
                <Label>Scan using connections:</Label>
                <ListBox Name="IgnoredInterfacesListBox" ItemsSource="{Binding NetworkInterfaces}" SelectionMode="Multiple"
                        SelectionChanged="IgnoredInterfacesListBox_OnSelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="networkInformation:NetworkInterface">
                            <StackPanel>
                                <TextBlock Text="{Binding Name}" />
                                <TextBlock Text="{Binding Description}" Style="{StaticResource Small}" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DockPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
